{"version":3,"sources":["daterelative.js"],"names":["DateRelative","this","init","apply","arguments","prototype","value","update","diff","Math","floor","Date","getTime","offset","max","future","number","unit","isFuture","valueOf","target","dtrl","_dtrl","datetime","getAttribute","dtf","match","UTC","format","textContent","updateAll","parent","document","it","targets","getElementsByTagName","i","setupAutoUpdate","setInterval"],"mappings":"AAAA,QAASA,gBAAkBC,KAAKC,KAAKC,MAAMF,KAAMG,WACjDJ,aAAaK,WACZH,KAAO,SAAUI,GAChBL,KAAKK,MAAQA,EAAQ,GAEtBC,OAAS,WACR,GAAIC,GAASC,KAAKC,QAAO,GAAIC,OAAOC,UAAYX,KAAKK,OAAS,IAC5B,iBAAvBN,cAAaa,SACnBL,EAAO,IAAGR,aAAaa,QAAUL,GACrCA,EAAOC,KAAKK,IAAIN,EAAOR,aAAaa,OAAQ,GAE7C,IAAIE,GAASP,EAAO,CAEpB,OADIO,KAAQP,GAAQA,GAChBA,EAAO,IACVP,KAAKe,OAAWR,EAChBP,KAAKgB,KAAW,IAChBhB,KAAKiB,SAAWH,EACTd,OAERO,EAAOC,KAAKC,MAAMF,EAAO,IACrBA,EAAO,IACVP,KAAKe,OAAWR,EAChBP,KAAKgB,KAAW,IAChBhB,KAAKiB,SAAWH,EACTd,OAERO,EAAOC,KAAKC,MAAMF,EAAO,IACrBA,EAAO,IACVP,KAAKe,OAAWR,EAChBP,KAAKgB,KAAW,KAChBhB,KAAKiB,SAAWH,EACTd,OAERO,EAAOC,KAAKC,MAAMF,EAAO,IACrBA,EAAO,IACVP,KAAKe,OAAWR,EAChBP,KAAKgB,KAAW,IAChBhB,KAAKiB,SAAWH,EACTd,MAEJO,EAAO,KACVP,KAAKe,OAAWP,KAAKC,MAAMF,EAAO,IAClCP,KAAKgB,KAAW,KAChBhB,KAAKiB,SAAWH,EACTd,OAERO,EAAOC,KAAKC,MAAMF,EAAO,KACzBP,KAAKe,OAAWR,EAChBP,KAAKgB,KAAW,IAChBhB,KAAKiB,SAAWH,EACTd,UAERkB,QAAU,WAAc,MAAOlB,MAAKK,QAErCN,aAAaO,OAAS,SAAUa,GAC/B,GAAIC,GAAOD,EAAOE,KAClB,KAAKD,EAAM,CACV,GAAIE,GAAWH,EAAOI,aAAa,WACnC,KAAKD,EAAU,MACf,IAAIE,GAAMF,EAASG,MAAM,mDACzBN,GAAOE,MAAQD,EAAO,GAAIrB,cAAaW,KAAKgB,KAAKF,EAAI,IAAKA,EAAI,GAAK,GAAIA,EAAI,IAAKA,EAAI,IAAKA,EAAI,IAAKA,EAAI,KAEvGJ,EAAKd,QAGL,IAAIqB,EACJA,GAASP,EAAKL,OACbK,EAAKJ,MACJI,EAAKH,SAAW,IAAW,KAC7BE,EAAOS,YAAcD,GAEtB5B,aAAa8B,UAAY,SAAUC,GAClCA,EAASA,GAAUC,QAEnB,KAAK,GAAWC,GADZC,EAAUH,EAAOI,qBAAqB,QACjCC,EAAI,EAAQH,EAAKC,EAAQE,GAAKA,IACtCpC,aAAaO,OAAO0B,IAGtBjC,aAAaqC,gBAAkB,SAAUN,GACxC,MAAOO,aAAY,WAClBtC,aAAa8B,UAAUC,IACrB","file":"../../../../../../tmp/d20161220-5527-4qb98v/daterelative.js20161220-5527-brvueq","sourcesContent":["function DateRelative () { this.init.apply(this, arguments) }\nDateRelative.prototype = {\n\tinit : function (value) {\n\t\tthis.value = value + 0;\n\t},\n\tupdate : function () {\n\t\tvar diff   = Math.floor((new Date().getTime() - this.value) / 1000);\n\t\tif (typeof DateRelative.offset == 'number') {\n\t\t\tif (diff < 0) DateRelative.offset = -diff;\n\t\t\tdiff = Math.max(diff - DateRelative.offset, 0);\n\t\t}\n\t\tvar future = diff < 0;\n\t\tif (future) diff = -diff;\n\t\tif (diff < 60) {\n\t\t\tthis.number   = diff;\n\t\t\tthis.unit     = '\\u79d2';\n\t\t\tthis.isFuture = future;\n\t\t\treturn this;\n\t\t}\n\t\tdiff = Math.floor(diff / 60);\n\t\tif (diff < 60) {\n\t\t\tthis.number   = diff;\n\t\t\tthis.unit     = '\\u5206';\n\t\t\tthis.isFuture = future;\n\t\t\treturn this;\n\t\t}\n\t\tdiff = Math.floor(diff / 60);\n\t\tif (diff < 24) {\n\t\t\tthis.number   = diff;\n\t\t\tthis.unit     = '\\u6642\\u9593';\n\t\t\tthis.isFuture = future;\n\t\t\treturn this;\n\t\t}\n\t\tdiff = Math.floor(diff / 24);\n\t\tif (diff < 31) {\n\t\t\tthis.number   = diff;\n\t\t\tthis.unit     = '\\u65e5';\n\t\t\tthis.isFuture = future;\n\t\t\treturn this;\n\t\t}\n\t\tif (diff < 365) {\n\t\t\tthis.number   = Math.floor(diff / 30);\n\t\t\tthis.unit     = '\\u30f6\\u6708';\n\t\t\tthis.isFuture = future;\n\t\t\treturn this;\n\t\t}\n\t\tdiff = Math.floor(diff / 365);\n\t\tthis.number   = diff;\n\t\tthis.unit     = '\\u5e74';\n\t\tthis.isFuture = future;\n\t\treturn this;\n\t},\n\tvalueOf : function () { return this.value }\n};\nDateRelative.update = function (target) {\n\tvar dtrl = target._dtrl;\n\tif (!dtrl) {\n\t\tvar datetime = target.getAttribute('datetime');\n\t\tif (!datetime) return;\n\t\tvar dtf = datetime.match(/(\\d+)-(\\d+)-(\\d+)T(\\d+):(\\d+):(\\d+)(?:\\.(\\d+))?Z/);\n\t\ttarget._dtrl = dtrl = new DateRelative(Date.UTC(+dtf[1], +dtf[2] - 1, +dtf[3], +dtf[4], +dtf[5], +dtf[6]));\n\t}\n\tdtrl.update();\n\n\t// var locale = navigator.userAgent.split(/[();]\\s*/)[4];\n\tvar format;\n\tformat = dtrl.number +\n\t\tdtrl.unit +\n\t\t(dtrl.isFuture ? '\\u5f8c' : '\\u524d');\n\ttarget.textContent = format;\n};\nDateRelative.updateAll = function (parent) {\n\tparent = parent || document;\n\tvar targets = parent.getElementsByTagName('time');\n\tfor (var i = 0, it; (it = targets[i]); i++) {\n\t\tDateRelative.update(it);\n\t}\n};\nDateRelative.setupAutoUpdate = function (parent) {\n\treturn setInterval(function () {\n\t\tDateRelative.updateAll(parent);\n\t}, 60 * 1000);\n};\n"]}